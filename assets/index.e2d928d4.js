import{n as t,j as e,ad as he,ae as ge,a7 as W,U as be,D as fe,v as ke,w as R,L as b,i as O,B as Ne,A as P,aj as H,ak as x,r as g,al as U,am as ve,a5 as Te,an as Ce,a6 as z,a8 as Se,ao as xe,ap as we,aq as ye,ar as De,t as Me,f as Ae,as as Fe,at as $,au as V,av as _,aw as Be,ax as Pe,ay as Re}from"./index.c4f4686b.js";import{M as ze,P as Y,A as G,c as Ie,s as Q,i as D,X as Oe,a as Ee}from"./App.6bb83c43.js";import{R as Le}from"./index.8dcadad1.js";import{S as je}from"./search.821dbdbf.js";import{M as Z}from"./more-vertical.2ad88b30.js";import{M as Ue}from"./mail.5708313c.js";import{S as K}from"./star.d0406447.js";import{T as ee}from"./trash.211a49ee.js";import{P as $e}from"./plus.4887533c.js";import{F as Ge}from"./index.68cc2c76.js";import{r as We}from"./editor.4f9dcffe.js";import{S as J,c as qe}from"./react-select.esm.2325f8c3.js";import{u as He,C as Ve}from"./index.esm.2872fe53.js";import{D as M}from"./Draft.579e1353.js";/* empty css                  */import"./objectWithoutProperties.ea8e8d27.js";import"./emotion-memoize.esm.06f0e458.js";const _e=""+new URL("avatar-blank.a991450c.png",import.meta.url).href,Qe=p=>{const{query:v,tasks:n,params:s,setSort:u,dispatch:h,getTasks:r,setQuery:N,updateTask:d,selectTask:i,reOrderTasks:o,handleTaskSidebar:m,handleMainSidebar:T}=p,w=a=>{h(i(a)),m()},C=a=>a.includes("high")?"light-primary":a.includes("medium")?"light-warning":a.includes("low")?"light-success":a.includes("update")?"light-danger":a.includes("team")?"light-info":"light-primary",A=a=>{const c={team:"light-primary",low:"light-success",medium:"light-warning",high:"light-danger",update:"light-info"};return a.map(f=>e(Ne,{className:"text-capitalize",color:c[f],pill:!0,children:f},f))},F=a=>{const c=a.assignee;return c.avatar===void 0||c.avatar===null?e(G,{img:_e,imgHeight:"32",imgWidth:"32"}):c.avatar!==""?e(G,{img:c.avatar,imgHeight:"32",imgWidth:"32"}):e(G,{color:C(a.tags),content:c.fullName,initials:!0})},I=()=>e(Y,{className:"list-group todo-task-list-wrapper",options:{wheelPropagation:!1},containerRef:a=>{a&&(a._getBoundingClientRect=a.getBoundingClientRect,a.getBoundingClientRect=()=>{const c=a._getBoundingClientRect();return{...c,height:Math.floor(c.height)}})},children:n.length?e(Le,{tag:"ul",list:n,handle:".drag-icon",className:"todo-task-list media-list",setList:a=>h(o(a)),children:n.map((a,c)=>e("li",{onClick:()=>w(a),className:O("todo-item",{completed:a.isCompleted}),children:t("div",{className:"todo-title-wrapper",children:[t("div",{className:"todo-title-area",children:[e(Z,{className:"drag-icon"}),e("div",{className:"form-check",children:e(W,{type:"checkbox",id:a.title,checked:a.isCompleted,onClick:f=>f.stopPropagation(),onChange:f=>{f.stopPropagation(),h(d({...a,isCompleted:f.target.checked}))}})}),e("span",{className:"todo-title",children:a.title})]}),t("div",{className:"todo-item-action mt-lg-0 mt-50",children:[a.tags&&a.tags.length?e("div",{className:"badge-wrapper me-1",children:A(a.tags)}):null,a.dueDate?t("small",{className:"text-nowrap text-muted me-1",children:[new Date(a.dueDate).toLocaleString("default",{month:"short"})," ",new Date(a.dueDate).getDate().toString().padStart(2,"0")]}):null,a.assignee?F(a):null]})]})},`${a.id}-${c}`))}):e("div",{className:"no-results show",children:e("h5",{children:"No Items Found"})})}),B=a=>{N(a.target.value),h(r(s))},y=(a,c)=>{a.preventDefault(),u(c),h(r({...s}))};return t("div",{className:"todo-app-list",children:[t("div",{className:"app-fixed-search d-flex align-items-center",children:[e("div",{className:"sidebar-toggle cursor-pointer d-block d-lg-none ms-1",onClick:T,children:e(ze,{size:21})}),e("div",{className:"d-flex align-content-center justify-content-between w-100",children:t(he,{className:"input-group-merge",children:[e(ge,{children:e(je,{className:"text-muted",size:14})}),e(W,{placeholder:"Search task",value:v,onChange:B})]})}),t(be,{children:[e(fe,{className:"hide-arrow me-1",tag:"a",href:"/",onClick:a=>a.preventDefault(),children:e(Z,{className:"text-body",size:16})}),t(ke,{end:!0,children:[e(R,{tag:b,to:"/",onClick:a=>y(a,"title-asc"),children:"Sort A-Z"}),e(R,{tag:b,to:"/",onClick:a=>y(a,"title-desc"),children:"Sort Z-A"}),e(R,{tag:b,to:"/",onClick:a=>y(a,"assignee"),children:"Sort Assignee"}),e(R,{tag:b,to:"/",onClick:a=>y(a,"due-date"),children:"Sort Due Date"}),e(R,{tag:b,to:"/",onClick:a=>y(a,""),children:"Reset Sort"})]})]})]}),I()]})},Ze=p=>{const{handleTaskSidebar:v,setMainSidebar:n,mainSidebar:s,dispatch:u,getTasks:h,params:r}=p,N=m=>{u(h({...r,filter:m}))},d=m=>{u(h({...r,tag:m}))},i=m=>!!(r.filter&&r.filter===m||r.tag&&r.tag===m),o=()=>{v(),n()};return e("div",{className:O("sidebar-left",{show:s===!0}),children:e("div",{className:"sidebar",children:e("div",{className:"sidebar-content todo-sidebar",children:t("div",{className:"todo-app-menu",children:[e("div",{className:"add-task",children:e(P,{color:"primary",onClick:o,block:!0,children:"Add Task"})}),t(Y,{className:"sidebar-menu-list",options:{wheelPropagation:!1},children:[t(H,{tag:"div",className:"list-group-filters",children:[t(x,{action:!0,tag:b,to:"/apps/todo/",active:r.filter===""&&r.tag==="",onClick:()=>N(""),children:[e(Ue,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"My Tasks"})]}),t(x,{tag:b,to:"/apps/todo/important",active:i("important"),onClick:()=>N("important"),action:!0,children:[e(K,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Important"})]}),t(x,{tag:b,to:"/apps/todo/completed",active:i("completed"),onClick:()=>N("completed"),action:!0,children:[e(Ie,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Completed"})]}),t(x,{tag:b,to:"/apps/todo/deleted",active:i("deleted"),onClick:()=>N("deleted"),action:!0,children:[e(ee,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Deleted"})]})]}),t("div",{className:"mt-3 px-2 d-flex justify-content-between",children:[e("h6",{className:"section-label mb-1",children:"Tags"}),e($e,{className:"cursor-pointer",size:14})]}),t(H,{className:"list-group-labels",children:[t(x,{active:i("team"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/team",onClick:()=>d("team"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-primary me-1"}),e("span",{className:"align-middle",children:"Team"})]}),t(x,{active:i("low"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/low",onClick:()=>d("low"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-success me-1"}),e("span",{className:"align-middle",children:"Low"})]}),t(x,{active:i("medium"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/medium",onClick:()=>d("medium"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-warning me-1"}),e("span",{className:"align-middle",children:"Medium"})]}),t(x,{active:i("high"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/high",onClick:()=>d("high"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-danger me-1"}),e("span",{className:"align-middle",children:"High"})]}),t(x,{active:i("update"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/update",onClick:()=>d("update"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-info me-1"}),e("span",{className:"align-middle",children:"Update"})]})]})]})]})})})})},X=p=>p.charAt(0).toUpperCase()+p.slice(1),Je=p=>{const{children:v,store:n,handleTaskSidebar:s,setDeleted:u,deleted:h,important:r,setImportant:N,deleteTask:d,dispatch:i}=p,o=()=>{u(!h),i(d(n.selectedTask.id)),s()};return t("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[e("h5",{className:"modal-title",children:v}),t("div",{className:"todo-item-action d-flex align-items-center",children:[n&&!D(n.selectedTask)?e(ee,{className:"cursor-pointer mt-25",size:16,onClick:()=>o()}):null,e("span",{className:"todo-item-favorite cursor-pointer mx-75",children:e(K,{size:16,onClick:()=>N(!r),className:O({"text-warning":r===!0})})}),e(Oe,{className:"fw-normal mt-25",size:16,onClick:s})]})]})},Xe=p=>{const{open:v,handleTaskSidebar:n,store:s,dispatch:u,updateTask:h,selectTask:r,addTask:N,deleteTask:d}=p,[i,o]=g.exports.useState({value:"pheobe",label:"Pheobe Buffay",img:U}),[m,T]=g.exports.useState([]),[w,C]=g.exports.useState(M.EditorState.createEmpty()),[A,F]=g.exports.useState(!1),[I,B]=g.exports.useState(!1),[y,a]=g.exports.useState(!1),[c,f]=g.exports.useState(new Date),{control:ae,setError:te,setValue:E,clearErrors:se,handleSubmit:le,formState:{errors:L}}=He({defaultValues:{title:""}}),ie=[{value:"pheobe",label:"Pheobe Buffay",img:U},{value:"chandler",label:"Chandler Bing",img:xe},{value:"ross",label:"Ross Geller",img:we},{value:"monica",label:"Monica Geller",img:ye},{value:"joey",label:"Joey Tribbiani",img:De},{value:"Rachel",label:"Rachel Green",img:Me}],ne=[{value:"team",label:"Team"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"update",label:"Update"}],re=({data:l,...k})=>e(qe.Option,{...k,children:t("div",{className:"d-flex align-items-center",children:[e("img",{className:"d-block rounded-circle me-50",src:l.img,height:"26",width:"26",alt:l.label}),e("p",{className:"mb-0",children:l.label})]})}),oe=()=>s&&!D(s.selectedTask)?e(P,{outline:!0,size:"sm",onClick:()=>F(!A),color:A===!0?"success":"secondary",children:A===!0?"Completed":"Mark Complete"}):"Add Task",ce=()=>{const{selectedTask:l}=s;if(!D(l)){if(E("title",l.title),F(l.isCompleted),B(l.isImportant),o([{value:l.assignee.fullName,label:l.assignee.fullName,img:l.assignee.avatar}]),f(l.dueDate),typeof l.description=="string")C(M.EditorState.createWithContent(M.ContentState.createFromText(l.description)));else{const k=l.description._immutable.currentContent.blockMap,S=Object.keys(k).map(j=>j);C(M.EditorState.createWithContent(M.ContentState.createFromText(k[S].text)))}if(l.tags.length){const k=[];l.tags.map(S=>{k.push({value:S,label:X(S)})}),T(k)}}},de=()=>{T([]),C(""),E("title",""),o({value:"pheobe",label:"Pheobe Buffay",img:U}),F(!1),B(!1),f(new Date),u(r({})),se()},me=()=>{const l=M.EditorState.createWithContent(M.ContentState.createFromText(s.selectedTask.description));if(E("title",s.selectedTask.title),C(l),F(s.selectedTask.isCompleted),B(s.selectedTask.isImportant),a(s.selectedTask.isDeleted),f(s.selectedTask.dueDate),s.selectedTask.assignee.fullName!==i.label&&o({value:s.selectedTask.assignee.fullName,label:s.selectedTask.assignee.fullName,img:s.selectedTask.assignee.avatar}),s.selectedTask.tags.length){const k=[];s.selectedTask.tags.map(S=>{k.push({value:S,label:X(S)})}),T(k)}},pe=()=>s&&!D(s.selectedTask)?t(g.exports.Fragment,{children:[e(P,{color:"primary",className:"update-btn update-todo-item me-1",children:"Update"}),e(P,{color:"secondary",onClick:me,outline:!0,children:"Reset"})]}):t(g.exports.Fragment,{children:[e(P,{color:"primary",className:"add-todo-item me-1",children:"Add"}),e(P,{color:"secondary",onClick:n,outline:!0,children:"Cancel"})]});return e(ve,{isOpen:v,toggle:n,className:"sidebar-lg",contentClassName:"p-0",onOpened:ce,onClosed:de,modalClassName:"modal-slide-in sidebar-todo-modal",children:t(Te,{id:"form-modal-todo",className:"todo-modal",onSubmit:le(l=>{const k=[],S=!D(s.selectedTask)&&i.label===s.selectedTask.assignee.fullName;m.length&&m.map(ue=>k.push(ue.value));const j={fullName:i.label,avatar:i.img},q={dueDate:c,title:l.title,tags:k,description:w,isCompleted:A,isDeleted:y,isImportant:I,assignee:S||i.label===void 0?s.selectedTask.assignee:j};l.title.length?D(L)&&(D(s.selectedTask)||!D(s.selectedTask)&&!s.selectedTask.title.length?u(N(q)):u(h({...q,id:s.selectedTask.id})),n()):te("title",{type:"manual"})}),children:[e(Je,{store:s,deleted:y,dispatch:u,important:I,deleteTask:d,setDeleted:a,setImportant:B,handleTaskSidebar:n,children:oe()}),t(Ce,{className:"flex-grow-1 pb-sm-0 pb-3",children:[t("div",{className:"mb-1",children:[t(z,{className:"form-label",for:"task-title",children:["Title ",e("span",{className:"text-danger",children:"*"})]}),e(Ve,{name:"title",control:ae,render:({field:l})=>e(W,{id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:L.title&&!0,...l})}),L.title&&e(Se,{children:"Please enter a valid task title"})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"task-assignee",children:"Assignee"}),e(J,{id:"task-assignee",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ie,theme:Q,value:i,onChange:l=>o(l),components:{Option:re}})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"due-date",children:"Due Date"}),e(Ge,{id:"due-date",name:"due-date",className:"form-control",onChange:l=>f(l[0]),value:c,options:{dateFormat:"Y-m-d"}})]}),t("div",{className:"mb-1",children:[e(z,{className:"form-label",for:"task-tags",children:"Tags"}),e(J,{isMulti:!0,id:"task-tags",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ne,theme:Q,value:m,onChange:l=>{T(l!==null?[...l]:[])}})]}),t("div",{className:"mb-1",children:[e(z,{for:"task-desc",className:"form-label",children:"Description"}),e(We.exports.Editor,{editorState:w,wrapperClassName:"toolbar-bottom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,options:["bold","italic","underline"]}},onEditorStateChange:l=>C(l)})]}),e("div",{children:pe()})]})]})})};const ba=()=>{const[p,v]=g.exports.useState(""),[n,s]=g.exports.useState(""),[u,h]=g.exports.useState(!1),[r,N]=g.exports.useState(!1),d=Ee(),i=Ae(C=>C.todo),o=Fe(),m={filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""},T=()=>h(!u),w=()=>N(!r);return g.exports.useEffect(()=>{d($({filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""}))},[i.tasks.length,o.filter,o.tag,n,p]),t(g.exports.Fragment,{children:[e(Ze,{store:i,params:m,getTasks:$,dispatch:d,mainSidebar:u,urlFilter:o.filter,setMainSidebar:h,handleTaskSidebar:w}),e("div",{className:"content-right",children:e("div",{className:"content-wrapper",children:t("div",{className:"content-body",children:[e("div",{className:O("body-content-overlay",{show:u===!0}),onClick:T}),i?e(Qe,{store:i,tasks:i.tasks,sort:p,query:n,params:m,setSort:v,setQuery:s,dispatch:d,getTasks:$,paramsURL:o,updateTask:V,selectTask:_,reOrderTasks:Be,handleMainSidebar:T,handleTaskSidebar:w}):null,e(Xe,{store:i,params:m,addTask:Pe,dispatch:d,open:r,updateTask:V,selectTask:_,deleteTask:Re,handleTaskSidebar:w})]})})})]})};export{ba as default};
