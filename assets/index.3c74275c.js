import{j as e,L as J,i as L,B as K,f as X,r as i,c6 as b,n as r,am as Y,bd as Z,an as _,a0 as k,a1 as l,a7 as c,A as N,c7 as S,c8 as ee,a5 as F,a6 as P,a8 as D,a4 as se,c9 as ae,ca as re,aP as te}from"./index.6fe50bb5.js";import{R as ne}from"./react-paginate.3b6bdd60.js";import{Q as ie}from"./react-dataTable-component.c02dcc8a.js";import{u as le,C as T}from"./index.esm.54e465e8.js";import{C as oe}from"./chevron-down.37024f47.js";import{E as ce}from"./edit.fe14798b.js";import{T as me}from"./trash.913a82c1.js";import{a as de}from"./App.cb24265c.js";import"./emotion-memoize.esm.06f0e458.js";const pe={support:"light-info",user:"light-success",manager:"light-warning",administrator:"light-primary","restricted-user":"light-danger"},he=[{name:"Name",sortable:!0,minWidth:"350px",cell:({name:a})=>a,selector:a=>a.name},{sortable:!0,minWidth:"350px",name:"Assigned To",cell:({assignedTo:a})=>a?a.map((t,m)=>{const d=a[a.length-1]===m;return e(J,{to:"/apps/user/list",className:L({"me-50":!d}),children:e(K,{pill:!0,color:pe[t],className:"text-capitalize",children:t.replace("-"," ")})},`${t}-${m}`)}):null},{sortable:!0,minWidth:"350px",name:"Created Date",selector:a=>a.createdDate,cell:({createdDate:a})=>a,sortFunction:(a,t)=>new Date(t.createdDate)-new Date(a.createdDate)}],ue=({role:a,setShow:t,searchTerm:m,rowsPerPage:d,handlePerPage:C,handleFilter:x,handleAssignedToChange:v})=>r(k,{className:"text-nowrap w-100 my-75 g-0 permission-header",children:[e(l,{xs:12,lg:4,className:"d-flex align-items-center",children:r("div",{className:"d-flex align-items-center justify-content-center justify-content-lg-start",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),r(c,{className:"mx-50",type:"select",id:"rows-per-page",value:d,onChange:C,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),e(l,{xs:12,lg:8,children:r("div",{className:"d-flex align-items-center justify-content-lg-end justify-content-start flex-md-nowrap flex-wrap mt-lg-0 mt-1",children:[r("div",{className:"d-flex align-items-center me-1",children:[e("label",{className:"mb-0",htmlFor:"search-permission",children:"Search:"}),e(c,{type:"text",value:m,id:"search-permission",className:"ms-50 w-100",onChange:n=>x(n.target.value)})]}),e("div",{className:"mt-50 width-200 me-1 mt-sm-0 mt-1",children:r(c,{type:"select",name:"select",value:a,onChange:n=>v(n.target.value),children:[e("option",{value:"",children:"Select Role"}),e("option",{value:"administrator",children:"Administrator"}),e("option",{value:"manager",children:"Manager"}),e("option",{value:"user",children:"User"}),e("option",{value:"support",children:"Support"}),e("option",{value:"restricted-user",children:"Restricted User"})]})}),e(N,{className:"add-permission mt-sm-0 mt-1",color:"primary",onClick:()=>t(!0),children:"Add Permission"})]})})]}),ge=()=>{const a=de(),t=X(s=>s.permissions),{reset:m,control:d,setError:C,setValue:x,handleSubmit:v,formState:{errors:n}}=le({defaultValues:{permissionName:""}}),[y,p]=i.exports.useState(!1),[f,j]=i.exports.useState(""),[h,A]=i.exports.useState(""),[u,E]=i.exports.useState(1),[o,B]=i.exports.useState(10);i.exports.useEffect(()=>{a(b({assignedTo:f,q:h,page:u,perPage:o}))},[a,t.data.length]);const q=s=>{a(b({assignedTo:f,q:h,perPage:o,page:s.selected+1})),E(s.selected+1)},M=s=>{const g=parseInt(s.currentTarget.value);a(b({assignedTo:f,q:h,perPage:g,page:u})),B(g)},R=s=>{A(s),a(b({q:s,assignedTo:f,page:u,perPage:o}))},H=s=>{j(s),a(b({q:h,assignedTo:s,page:u,perPage:o}))},$=()=>{const s=Number(Math.ceil(t.total/o));return e(ne,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:u!==0?u-1:0,onPageChange:g=>q(g),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},W=()=>{const s={q:h},g=Object.keys(s).some(function(G){return s[G].length>0});return t.data.length>0?t.data:t.data.length===0&&g?[]:t.allData.slice(0,o)},z=s=>{a(S(s)),x("permissionName",s.name),p(!0)},I=()=>{a(S(null)),x("permissionName","")},w=s=>{s.permissionName.length?(t.selected!==null?a(ae({name:s.permissionName,id:t.selected.id})):a(re({name:s.permissionName})),p(!1)):C("permissionName",{type:"manual"})},U=[...he,{name:"Actions",cell:s=>r("div",{className:"d-flex align-items-center permissions-actions",children:[e(N,{size:"sm",color:"transparent",className:"btn btn-icon",onClick:()=>z(s),children:e(ce,{className:"font-medium-2"})}),e(N,{size:"sm",color:"transparent",className:"btn btn-icon",onClick:()=>a(ee(s.id)),children:e(me,{className:"font-medium-2"})})]})}],O=()=>{m(),p(!1)},Q=()=>t.selected!==null?"Edit permission as per your requirements.":"Permissions you may use and assign to your users.",V=()=>t.selected===null?r(k,{tag:F,onSubmit:v(w),children:[r(l,{xs:12,children:[e(P,{className:"form-label",for:"permission-name",children:"Permission Name"}),e(T,{control:d,id:"permissionName",name:"permissionName",render:({field:s})=>e(c,{placeholder:"Permission Name",invalid:n.permissionName&&!0,...s})}),n&&n.permissionName&&e(D,{children:"Please enter a valid Permission Name"})]}),e(l,{xs:12,className:"mt-75",children:r("div",{className:"form-check",children:[e(c,{type:"checkbox",id:"core-perm-checkbox"}),e(P,{className:"form-check-label",for:"core-perm-checkbox",children:"Set as core permission"})]})}),r(l,{xs:12,className:"text-center mt-2",children:[e(N,{className:"me-1",color:"primary",children:"Create Permission"}),e(N,{outline:!0,type:"reset",onClick:O,children:"Discard"})]})]}):r(i.exports.Fragment,{children:[r(se,{color:"warning",children:[e("h6",{className:"alert-heading",children:"Warning!"}),e("div",{className:"alert-body",children:"By editing the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."})]}),r(k,{tag:F,onSubmit:v(w),children:[r(l,{xs:12,sm:9,children:[e(P,{className:"form-label",for:"permission-name",children:"Permission Name"}),e(T,{control:d,id:"permissionName",name:"permissionName",render:({field:s})=>e(c,{placeholder:"Permission Name",invalid:n.permissionName&&!0,...s})}),n&&n.permissionName&&e(D,{children:"Please enter a valid Permission Name"})]}),e(l,{xs:12,sm:3,className:"p-sm-0",children:e(N,{className:"mt-2",color:"primary",children:"Update"})}),e(l,{xs:12,className:"mt-75",children:r("div",{className:"form-check",children:[e(c,{type:"checkbox",id:"core-perm-checkbox"}),e(P,{className:"form-check-label",for:"core-perm-checkbox",children:"Set as core permission"})]})})]})]});return r(i.exports.Fragment,{children:[e("div",{className:"react-dataTable",children:e(ie,{noHeader:!0,pagination:!0,subHeader:!0,responsive:!0,paginationServer:!0,columns:U,sortIcon:e(oe,{}),className:"react-dataTable",paginationComponent:$,data:W(),subHeaderComponent:e(ue,{setShow:p,assignedTo:f,searchTerm:h,rowsPerPage:o,handleFilter:R,handlePerPage:M,handleAssignedToChange:H})})}),r(Y,{isOpen:y,onClosed:I,toggle:()=>p(!y),className:"modal-dialog-centered",children:[e(Z,{className:"bg-transparent",toggle:()=>p(!y)}),r(_,{className:L({"p-3 pt-0":t.selected!==null,"px-sm-5 pb-5":t.selected===null}),children:[r("div",{className:"text-center mb-2",children:[r("h1",{className:"mb-1",children:[t.selected!==null?"Edit":"Add New"," Permission"]}),e("p",{children:Q()})]}),V()]})]})]})},we=()=>r(i.exports.Fragment,{children:[e("h3",{children:"Permissions List"}),e("p",{children:"Each category (Basic, Professional, and Business) includes the four predefined roles shown below."}),e(te,{children:e("div",{className:"card-datatable app-user-list table-responsive",children:e(ge,{})})})]});export{we as default};
